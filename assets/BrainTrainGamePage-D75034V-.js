import{b as P,u as M,r as n,j as e}from"./index-BcBT8DeP.js";import{u as U,L as z,P as I}from"./useGameSession-BXvOYOOa.js";import E from"./BrainTrainBoard-Dbbi6ZfC.js";import{S as B,C as J,a as A,U as F}from"./users-DyNUyZSk.js";import{L as Y}from"./log-out-BYepkYjg.js";import"./x-CRDtMRLs.js";const K=()=>{const{gameName:i,gameId:o}=P(),u=M(),{gameId:d,gameInfo:a,gamePhase:m,gameState:r,gameOptions:y,players:c,localPlayer:l,isHost:p,joinGame:g,leaveGame:v,setMyUsername:N,setGameOptions:w,startGame:C,performAction:G}=U(),[x,S]=n.useState(l?.username||""),[f,b]=n.useState(!1);n.useEffect(()=>{(async()=>{o&&i&&!d&&await g(o,i)})()},[o,i,d,g,u]);const h=n.useMemo(()=>!a||!r||!l?{message:"",isMyTurn:!1}:{message:a.getGameStatus(r,c),isMyTurn:a.isTurnOf(r,l.id)},[a,r,c,l]);if(!d||!a||!l)return e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(z,{className:"animate-spin h-12 w-12 text-cyan-400"}),e.jsx("p",{className:"mt-4 text-xl text-slate-300",children:"Joining Game..."})]});const L=r,j=async()=>{await v(),u("/",{replace:!0})},T=()=>N(x.trim()),k=(s,t)=>w({[s]:t}),O=()=>{navigator.clipboard.writeText(window.location.href).then(()=>{b(!0),setTimeout(()=>b(!1),2e3)})};return m==="in-game"||m==="post-game"?e.jsx(E,{gameState:L,isGameOver:m==="post-game",onPerformAction:G,onLeaveGame:j,statusMessage:h.message,isMyTurn:h.isMyTurn}):e.jsxs("div",{className:"w-full max-w-2xl p-6 md:p-8 space-y-6 bg-slate-800 rounded-2xl shadow-2xl shadow-slate-950/50 border border-slate-700",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white text-center border-b border-slate-700 pb-4",children:[a.displayName," Lobby"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-slate-300",children:"Your Settings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:s=>S(s.target.value),className:"flex-grow px-3 py-2 text-white bg-slate-700 border border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Enter your name..."}),e.jsx("button",{onClick:T,disabled:!x.trim(),className:"p-2 text-slate-300 bg-slate-700/50 rounded-md hover:bg-slate-700 disabled:opacity-50",children:e.jsx(B,{size:20})})]}),e.jsx("button",{onClick:O,className:`w-full flex items-center justify-center gap-2 px-4 py-2 font-semibold rounded-md transition-colors ${f?"bg-green-600/20 text-green-400":"bg-slate-700/50 text-slate-300 hover:bg-slate-700"}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(J,{size:18})," Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{size:18})," Copy Invite Link"]})}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-700/50",children:[e.jsx("h3",{className:"font-semibold text-slate-300",children:"Game Options"}),a.gameOptions?.map(s=>e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-400",children:s.label}),e.jsx("select",{value:y[s.id],onChange:t=>k(s.id,t.target.value),disabled:!p,className:"mt-1 block w-full px-3 py-2 text-white bg-slate-700 border border-slate-600 rounded-md focus:outline-none disabled:bg-slate-800 disabled:text-slate-500",children:s.choices?.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]},s.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold text-slate-300 flex items-center gap-2",children:[e.jsx(F,{size:20})," Players"]}),e.jsx("div",{className:"space-y-2 p-3 bg-slate-900/50 rounded-md min-h-[120px]",children:c.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2.5 bg-slate-700/50 rounded-lg",children:e.jsxs("span",{className:"font-bold text-slate-100",children:[s.username," ",s.id===l.id&&"(You)"]})},s.id))})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-700 flex flex-col md:flex-row-reverse gap-3",children:[p?e.jsxs("button",{onClick:C,className:"w-full md:w-auto flex items-center justify-center gap-2 px-8 py-3 text-lg font-semibold text-slate-900 bg-green-500 rounded-lg hover:bg-green-400",children:[e.jsx(I,{size:20})," Start Game"]}):e.jsx("p",{className:"w-full text-center text-slate-400 p-3",children:"Waiting for host..."}),e.jsxs("button",{onClick:j,className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 font-semibold text-slate-300 bg-slate-700/50 rounded-lg hover:text-red-400",children:[e.jsx(Y,{size:16})," Leave"]})]})]})};export{K as default};
